<mvc:View
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    controllerName="sap.ui.comp.sample.smarttable.smartMTableWithCriticality.controller.SmartTable"
    height="100%">

    <smartFilterBar:SmartFilterBar id="smartFilterBar"
        entitySet="NotaFiscal" persistencyKey="SmartFilter_NotaFiscal" />

    <smartTable:SmartTable id="smartTable"
        entitySet="NotaFiscal"
        smartFilterId="smartFilterBar" useExportToExcel="true" beforeExport="onBeforeExport"
        useVariantManagement="true" useTablePersonalisation="true" header="Nota Fiscal"
        showRowCount="true" persistencyKey="SmartTable_NotaFiscal"
        enableAutoBinding="true" class="sapUiResponsiveContentPadding"
        tableType="ResponsiveTable" demandPopin="true">
        <Table items="{NotaFiscal>/}">
            <columns>
                <Column>
                    <Text text="Número da Nota" />
                    <customData>
                        <core:CustomData key="p13nData" value='{"columnKey":"numeroNota", "leadingProperty":"numeroNota", "sortProperty":"numeroNota", "filterProperty":"numeroNota", "columnIndex":"0"}' />
                    </customData>
                </Column>
                <Column>
                    <Text text="Valor" />
                    <customData>
                        <core:CustomData key="p13nData" value='{"columnKey":"valor", "leadingProperty":"valor", "sortProperty":"valor", "filterProperty":"valor", "columnIndex":"1"}' />
                    </customData>
                </Column>
                <Column>
                    <Text text="Detalhes" />
                    <customData>
                        <core:CustomData key="p13nData" value='{"columnKey":"acoes", "leadingProperty":"acoes", "sortProperty":"acoes", "filterProperty":"acoes", "columnIndex":"2"}' />
                    </customData>
                </Column>
            </columns>
            <items>
                <ColumnListItem>
                    <cells>
                        <Text text="{NotaFiscal>numeroNota}" />
                        <Text text="{NotaFiscal>valor}" />
                        <Button text="Detalhes" press="onOpenNotaFiscalDetails" />
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </smartTable:SmartTable>

    <Dialog id="notaFiscalDetailsDialog" title="Detalhes da Nota Fiscal">
        <content>
            <VBox>
                <Text text="Nome do Fornecedor: {NotaFiscalSelected>/fornecedor/nome}" />
                <Text text="Nome do Cliente: {NotaFiscalSelected>/cliente/nome}" />
                <Text text="Valor: {NotaFiscalSelected>/valor}" />
                <Text text="Número da Nota: {NotaFiscalSelected>/numeroNota}" />
            </VBox>
        </content>
        <endButton>
            <Button text="Fechar" press="onCloseNotaFiscalDetails" />
        </endButton>
    </Dialog>

</mvc:View>
